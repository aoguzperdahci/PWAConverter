<p-toast></p-toast>
<p-confirmPopup></p-confirmPopup>

<div class="grid m-0 p-2">
  <ng-container *ngFor="let p of (projects$ | async)">
    <app-project-item [project]="p" class="col-12 sm:col-6 lg:col-4 xl:col-3"></app-project-item>
  </ng-container>

  <div class="col-12 sm:col-6 lg:col-4 xl:col-3">
    <div
      class="p-3 border-1 surface-border surface-card border-round h-full flex flex-wrap align-items-center justify-content-center add-new-card"
      (click)="showAddNewDialog()">
      <div class="w-full flex align-self-end justify-content-center"><i class="pi pi-plus" style="font-size: 3rem;"></i>
      </div>
      <div class="w-full flex align-self-start justify-content-center">
        <div class="text-2xl font-bold p-1 card-title">Add new</div>
      </div>
    </div>
  </div>
</div>


<p-dialog header="Add New" [(visible)]="addNewDialogVisible" [modal]="true" [style]="{width: '600px'}">
  <div class="flex justify-content-center flex-wrap">
    <div class="icon-container w-5 shadow-2 border-round" (click)="fileUpload.click()">
      <img class="icon-image" [src]="newProjectIcon" alt="project-icon" />
      <div class="icon-overlay">
        <div class="icon-upload">
          <i class="pi pi-upload text-4xl"></i>
        </div>
      </div>
    </div>

    <input #fileUpload id="file" type="file" class="hidden" (change)="onFileChange($event)" />

    <div class="w-full flex flex-wrap align-items-center justify-content-start mt-4">
      <div class="w-2"></div>
      <label for="name1" class="block text-900 font-medium mr-2">Name</label>
      <input id="name1" type="text" placeholder="Name" pInputText class="align-self-center w-6"
        [(ngModel)]="newProjectName">
    </div>

    <button pButton label="Save" class="w-9 mt-4" (click)="createProject()"></button>
  </div>
</p-dialog>
